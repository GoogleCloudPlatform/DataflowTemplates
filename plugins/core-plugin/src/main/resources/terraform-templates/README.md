# Overview

Resources in this directory enable the
[com.google.cloud.teleport.plugin.terraform.TemplateTerraformGenerator](../../java/com/google/cloud/teleport/plugin/terraform/TemplateTerraformGenerator.java)
to generate [terraform modules](https://developer.hashicorp.com/terraform/language/modules).

# google.tf and google-beta.tf

The [google.tf](google.tf) and [google-beta.tf](google-beta.tf) configures how to generate a terraform module for a
Dataflow template
using [Apache FreeMarker](https://freemarker.apache.org/). Key to these templates are the separation of template
specific parameters
from what is acquired from each Dataflow templates'
[ImageSpecMetadata](../../java/com/google/cloud/teleport/plugin/model/ImageSpecMetadata.java)
[ImageSpecParameter](../../java/com/google/cloud/teleport/plugin/model/ImageSpecParameter.java)s.

Additional [RuntimeEnvironment](https://cloud.google.com/dataflow/docs/reference/rest/v1b3/RuntimeEnvironment)
are derived from the relevant terraform resource schemas. As of this README's writing, classic templates
rely on [google.tf](google.tf) and flex templates rely on [google-beta.tf](google-beta.tf). See
above section in this README for how these files were generated. They were generated by executing
[cicd/](../../../../../../cicd/cmd/run-get-terraform-schema) as shown below.

```
cd cicd
go run ./cmd/run-get-terraform-schema ../plugins/core-plugin/src/main/resources/terraform
```

To learn more about the `run-get-terraform-schema` executable run:

```
cd cicd
go run ./cmd/run-get-terraform-schema --help
```
