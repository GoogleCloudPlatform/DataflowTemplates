pipeline:
  type: chain
  transforms:
    - type: ReadFromPubSub
      config:
        subscription: {{ inputSubscription }}
        format: json
        schema:
          type: object
          properties:
            id: {type: integer}
            job: {type: string}
            name: {type: string}
    - type: MapToFields
      config:
        language: python
        append: true
        drop: [ name ]
        fields:
          name: name.upper()
    - type: WriteToBigQuery
      config:
        table: {{ outputTableSpec }}
  windowing:
    type: fixed
    size: 5s
options:
  streaming: true